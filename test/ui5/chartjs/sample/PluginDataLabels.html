<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Test Page - BarChart mix Line</title>
	<base href="../../../../">
	<!--[if lte IE 9]><script>
	(function() {
		var baseTag = document.getElementsByTagName('base')[0];
		baseTag.href = baseTag.href;
	})();
	</script><![endif]-->

	<script id="sap-ui-bootstrap"
		src="resources/sap-ui-core.js"
		data-sap-ui-libs="sap.m,ui5.chartjs"
		data-sap-ui-theme="sap_belize">
	</script>

	<script>
		sap.ui.getCore().attachInit(function () {
			// chart
			var oBarChart = new ui5.chartjs.BarChart({
				labels: [ "Chinese", "Math", "English", "Science", "Society"],
				pointClick: function(oEvent) {
					var points = oEvent.getParameter("points");
					sap.m.MessageToast.show(
						"points count:" + points.length, 
						{ at: "center center" });
				}
			});

			// options.scales: x
			var xAxis = new ui5.chartjs.axes.CategoryAxis({
				axisID: "subject",
				position: "bottom",
				title: "Subject"
			});
			oBarChart.addAggregation("scales", xAxis);

			// options.scales: y
			var yAxis = new ui5.chartjs.axes.LinearAxis({
				axisID: "score",
				position: "left",
				title: "Score",
				suggestedMax: 100.0,
				suggestedMin: 60.0
			});
			oBarChart.addAggregation("scales", yAxis);

			// data 1
			var data1 = new ui5.chartjs.data.Bar({
				label: "Male",
				data:  [81, 76, 83, 85, 90],
				xAxisID: "subject",
				yAxisID: "score",
				order: 1,
				backgroundColor:  ui5.chartjs.Palette.pick(6, 168)
			});
			// data1.addPlugin(oDataLabels);
			oBarChart.addDataset(data1);

			// data 2
			var data2 = new ui5.chartjs.data.Bar({
				label: "Female",
				data:  [82, 73, 88, 83, 91],
				xAxisID: "subject",
				yAxisID: "score",
				order: 1,
				backgroundColor:  ui5.chartjs.Palette.pick(7, 96)
			});
			oBarChart.addDataset(data2);

			// data 3: average line
			var data3 = new ui5.chartjs.data.Line({
				label: "Average",
				data:  [81.5, 74.5, 85.5, 84, 90.5],
				yAxisID: "score",
				borderColor:  ui5.chartjs.Palette.pick(1)
			});
			oBarChart.addDataset(data3);

			// plugin: datalabels
			var oBarLabels1 = new ui5.chartjs.plugins.DataLabels();
			oBarLabels1.addAttrValue("align", "start");
			oBarLabels1.addAttrValue("anchor", "end");
			oBarLabels1.addAttrValue("color", "black");
			data1.addPlugin(oBarLabels1);

			var oBarLabels2 = new ui5.chartjs.plugins.DataLabels();
			oBarLabels2.addAttrValue("align", "start");
			oBarLabels2.addAttrValue("anchor", "end");
			oBarLabels2.addAttrValue("color", "black");
			data2.addPlugin(oBarLabels2);

			var oLineLabels = new ui5.chartjs.plugins.DataLabels();
			oLineLabels.addAttrValue("align", "center");
			oLineLabels.addAttrValue("anchor", "center");
			oLineLabels.addAttrValue("backgroundColor", "white");
			oLineLabels.addAttrValue("borderColor", ctx => ctx.dataset.borderColor);
			oLineLabels.addAttrValue("borderRadius", 16);
			oLineLabels.addAttrValue("borderWidth", 3);
			oLineLabels.addAttrValue("color", ctx => ctx.dataset.borderColor);
			data3.addPlugin(oLineLabels);


			oBarChart.placeAt("content");
		});
	</script>
</head>
<body id="content" class="sapUiBody">
</body>
</html>
